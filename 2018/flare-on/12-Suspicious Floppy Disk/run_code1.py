
import struct
fp = open('tmp_ori.dat','rb')
tmp = fp.read(0x2dad*2)
fp.close()      
data = list(struct.unpack('11693H',tmp[:0x2dad*2]))
data[0xf5] = 0x25b7
data[0xf6] = 0x7f6
data[0xf7] = 0xeb
data[0xfb] = 0xf8
data[0xff] = 0xf8
data[0x10f] = 0x7f6 #var_010F
data[0x148] = 0x25b7
data[0x1ad] = 0x15b  #[0x7f6] = 0x15b off  var_01AD
while True:
	data[0x181] = data[data[0x10f]]  #[0x7f6] = 0x15b off
	if data[0x181] >= data[0x148] or data[data[0x10f]+data[0x181]] == 0xfffe:	
		# data[0x185] = data[0x10f]
		data[data[0x10f]] = data[0x1ad]
		data[0xfb] -= 3
		exit()		
	data[0xf8] = data[0x10f]  #0x7f6
	# data[0xfb] += 1  #0xf9
	data[0xf9] = 0x2e6  #2e6
	# data[0xfb] += 1  #0xfa	
	data[0x10f] = data[0xf8]
	data[0x7f1] = data[0xf8] + data[data[0xf8]]
	data[0x7ef] = data[data[0x7f1]]
	if data[0x7ef] == 0xffff:
		data[data[0xf8]] += 1  #off+1
		data[0xfb] -= 1  
	else:		
		data[0x7ee] = data[data[0xf8]+1]
		data[0x7f0] =  data[data[0xf8]+data[0x7ef]]    #[sc_base+[ins]]  next ins or data		
		data[0x7ee] = (data[0x7f0] - data[0x7ee])&0xffff 
		data[0x7f1] = data[0xf8]+1   #var_010F+1
		data[data[0x7f1]] = data[0x7ee]
		if data[0x7ef] != 2: 
			data[0x7f1] = data[0xf8]+data[0x7ef]
			data[data[0x7f1]] = data[0x7ee]
		data[0x7f5] = data[data[0xf8]]

		if data[0x7ee] & 0x8000:
			data[data[0xf8]] += 1   #skip
		data[data[0xf8]] += 1
		data[0xfb] -= 1 
		
	data[0xfb] -= 1 	
	data[0x1a1] = data[data[0x10f]+6]
	if data[0x1a1] == 1:		
		data[data[0x10f]+6] = 0		
		data[2]  = data[data[0x10f]+4]		
		print chr(data[2]),
		data[4] = 1
		data[data[0x10f]+4] = 0	

	data[0x1a1] = data[data[0x10f]+5]
	if data[0x1a1] == 1:
		data[data[0x10f]+5] = 0
		data[3] = 1
		data[data[0x10f]+3] = data[1]





